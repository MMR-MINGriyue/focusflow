# FocusFlow 音效管理系统使用指南

## 概述

FocusFlow 的音效管理系统提供了完整的自定义音效解决方案，包括音效文件管理、音效映射配置、音量控制和数据持久化功能。

## 功能特性

### 1. 音效文件管理
- **上传自定义音效**：支持 MP3、WAV、OGG 等常见音频格式
- **文件大小限制**：最大支持 10MB 的音频文件
- **音效分类**：自动分类为通知音效和环境音效
- **音效编辑**：可以重命名音效和添加描述
- **音效预览**：上传前后都可以预览播放
- **音效删除**：支持删除不需要的自定义音效

### 2. 音效映射配置
- **事件映射**：为不同事件配置专属音效
  - 专注开始：开始专注时播放
  - 休息开始：开始休息时播放
  - 微休息：微休息时播放
  - 通用通知：其他通知时播放
  - 背景音：专注时的背景环境音
- **实时预览**：配置时可以立即预览音效
- **配置保存**：支持保存和重置配置
- **智能分类**：根据音效类型自动筛选可用选项

### 3. 音量控制
- **主音量控制**：控制所有音效的整体音量
- **分类音量**：
  - 通知音效音量：控制提示音的音量
  - 环境音效音量：控制背景音的音量
- **淡入淡出**：可配置音效的渐变效果
- **静音功能**：一键静音所有音效
- **音量测试**：可以测试当前音量设置

### 4. 数据持久化
- **自动保存**：所有设置自动保存到本地存储
- **配置导出**：可以导出音效配置为 JSON 文件
- **错误恢复**：具备错误处理和数据恢复机制
- **存储监控**：显示存储使用情况和统计信息

## 使用方法

### 上传自定义音效

1. 进入设置页面，选择"音效管理"标签
2. 在相应的事件类型下点击"上传音效"按钮
3. 选择音频文件（支持 MP3、WAV、OGG 格式）
4. 等待上传完成，系统会自动验证音频文件
5. 上传成功后可以立即预览和使用

### 配置音效映射

1. 进入设置页面，选择"音效映射"标签
2. 为每个事件选择对应的音效
3. 点击"预览"按钮测试音效效果
4. 点击"保存配置"确认更改
5. 可以随时点击"重置默认"恢复默认设置

### 调整音量设置

1. 进入设置页面，选择"音量控制"标签
2. 调整主音量滑块控制整体音量
3. 分别调整通知音效和环境音效的音量
4. 配置淡入淡出时长（可选）
5. 使用测试按钮验证音量效果

### 验证数据持久化

1. 进入设置页面，选择"持久化测试"标签
2. 系统会自动运行测试验证数据保存功能
3. 查看测试结果确保所有功能正常
4. 如有问题，可以点击"重新测试"

## 技术规格

### 支持的音频格式
- **MP3**：最常用的音频格式，兼容性好
- **WAV**：无损音频格式，音质最佳
- **OGG**：开源音频格式，压缩率高

### 文件大小限制
- **最大文件大小**：10MB
- **推荐文件大小**：1-5MB
- **通知音效时长**：建议 1-5 秒
- **环境音效时长**：可以是较长的循环音频

### 存储机制
- **本地存储**：使用浏览器的 localStorage
- **数据格式**：JSON 格式存储配置信息
- **音频数据**：Base64 编码存储在本地
- **自动备份**：配置更改时自动保存

## 故障排除

### 音效上传失败
1. 检查文件格式是否支持
2. 确认文件大小不超过 10MB
3. 尝试使用其他音频文件
4. 检查浏览器是否支持 Web Audio API

### 音效无法播放
1. 检查浏览器音量设置
2. 确认应用内音量不为零
3. 检查是否开启了静音模式
4. 尝试刷新页面重新加载

### 设置无法保存
1. 检查浏览器是否支持本地存储
2. 清理浏览器缓存后重试
3. 确认没有使用隐私模式
4. 检查存储空间是否充足

### 性能问题
1. 减少自定义音效的数量
2. 使用较小的音频文件
3. 关闭不必要的音效
4. 清理浏览器缓存

## 最佳实践

### 音效选择建议
- **通知音效**：选择清脆、简短的音效
- **环境音效**：选择柔和、可循环的背景音
- **音量设置**：避免音量过大影响专注
- **文件优化**：使用适当的音频压缩

### 配置建议
- **定期备份**：导出配置文件作为备份
- **测试验证**：配置后及时测试效果
- **渐进调整**：逐步调整音量找到最佳设置
- **分类管理**：合理分类和命名自定义音效

## 更新日志

### v1.0.0 (当前版本)
- ✅ 完整的音效文件管理系统
- ✅ 高级音效映射配置
- ✅ 精细的音量控制
- ✅ 可靠的数据持久化
- ✅ 完善的错误处理
- ✅ 用户友好的界面设计

### 计划中的功能
- 🔄 音效库在线同步
- 🔄 音效分享和导入
- 🔄 更多音效格式支持
- 🔄 音效可视化分析
- 🔄 智能音效推荐

---

如有问题或建议，请通过项目的 GitHub 仓库提交 Issue。
